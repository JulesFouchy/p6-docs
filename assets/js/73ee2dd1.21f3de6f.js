"use strict";(self.webpackChunkp6_docs=self.webpackChunkp6_docs||[]).push([[1206],{3905:function(e,t,a){a.d(t,{Zo:function(){return m},kt:function(){return c}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},m=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),u=p(a),c=r,f=u["".concat(s,".").concat(c)]||u[c]||d[c]||i;return a?n.createElement(f,o(o({ref:t},m),{},{components:a})):n.createElement(f,o({ref:t},m))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},4764:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return m},default:function(){return u}});var n=a(2122),r=a(9756),i=(a(7294),a(3905)),o=["components"],l={title:"Time and Framerate"},s=void 0,p={unversionedId:"tutorials/time-and-framerate",id:"tutorials/time-and-framerate",isDocsHomePage:!1,title:"Time and Framerate",description:"Querying time information",source:"@site/docs/tutorials/11-time-and-framerate.md",sourceDirName:"tutorials",slug:"/tutorials/time-and-framerate",permalink:"/p6-docs/tutorials/time-and-framerate",tags:[],version:"current",sidebarPosition:11,frontMatter:{title:"Time and Framerate"},sidebar:"tutorials",previous:{title:"Read Pixel",permalink:"/p6-docs/tutorials/read-pixel"},next:{title:"angles",permalink:"/p6-docs/tutorials/angles"}},m=[{value:"Querying time information",id:"querying-time-information",children:[{value:"time()",id:"time",children:[]},{value:"delta_time()",id:"delta_time",children:[]}]},{value:"Framerate",id:"framerate",children:[{value:"Synced with monitor",id:"synced-with-monitor",children:[]},{value:"As high as possible",id:"as-high-as-possible",children:[]},{value:"Capped at",id:"capped-at",children:[]}]},{value:"Time perceived as",id:"time-perceived-as",children:[{value:"Realtime",id:"realtime",children:[]},{value:"Constant delta time",id:"constant-delta-time",children:[]}]},{value:"Pause and resume",id:"pause-and-resume",children:[]}],d={toc:m};function u(e){var t=e.components,a=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"querying-time-information"},"Querying time information"),(0,i.kt)("h3",{id:"time"},"time()"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ctx.time()")," returns the time in seconds since the creation of the ",(0,i.kt)("inlineCode",{parentName:"p"},"Context"),". It is useful for example if you want your drawing to be a direct function of time:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"ctx.circle(p6::Center{sin(ctx.time(),0.f)});\n")),(0,i.kt)("h3",{id:"delta_time"},"delta_time()"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ctx.delta_time()")," returns the time in seconds that elapsed since the last ",(0,i.kt)("inlineCode",{parentName:"p"},"update()")," call. It is useful for example if you want to do incremental movements frame by frame: taking ",(0,i.kt)("inlineCode",{parentName:"p"},"delta_time()")," into account will make sure that your animation is independent of the framerate and will be perceived the same even if your computer starts lagging a little bit, or if you change the framerate mode."),(0,i.kt)("p",null,"You really want to try and not depend of the framerate, for the framerate is an implementation detail and you would rather want to work at a conceptual level, with an animation that is continuous and only depends on the actual amount of time that elapses. This will also simplify your life when you will try to export your animation as a video."),(0,i.kt)("p",null,"For more details, see this article: ",(0,i.kt)("a",{parentName:"p",href:"https://medium.com/star-gazers/understanding-time-deltatime-6528a8c2b5c8"},"Understanding Time.deltaTime"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"float x = 0.f;\nctx.update = [&]() {\n    x += 0.001f; // Bad, if the framerate doubles x will change twice as fast.\n    x += 0.06f * ctx.delta_time(); // Good, we express our speed in units per second and changing the framerate won't change the animation speed.\n}\n")),(0,i.kt)("h2",{id:"framerate"},"Framerate"),(0,i.kt)("p",null,"The framerate mode controls the speed at which ",(0,i.kt)("inlineCode",{parentName:"p"},"update()")," will be called, a.k.a. the amount of physical time that elapses between two updates."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"NB:")," all of these modes will ",(0,i.kt)("em",{parentName:"p"},"try")," to satisfy your request but if your ",(0,i.kt)("inlineCode",{parentName:"p"},"update()")," function takes too long to run we might not be able to call it as often as you would like."),(0,i.kt)("h3",{id:"synced-with-monitor"},"Synced with monitor"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"ctx.framerate_synced_with_monitor();\n")),(0,i.kt)("p",null,"This is the default mode. It makes sure that the framerate will be adapted to your monitor (which is 60 Hertz in most cases). This is known as ",(0,i.kt)("em",{parentName:"p"},"vsync")," or ",(0,i.kt)("em",{parentName:"p"},"vertical synchronization"),". This will ask less unnecessary work to your computer because it is pointless to render more frames than your monitor can display anyways. It also prevents visual artifacts like screen tearing."),(0,i.kt)("h3",{id:"as-high-as-possible"},"As high as possible"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"ctx.framerate_as_high_as_possible();\n")),(0,i.kt)("p",null,"This will remove any constraint on your framerate and call ",(0,i.kt)("inlineCode",{parentName:"p"},"update()")," as fast as physically possible for your computer. This can be useful sometimes if you want to loop as fast as possible to see the end result of an animation.",(0,i.kt)("br",null),"\nPlease note that an alternative solution would be to keep ",(0,i.kt)("inlineCode",{parentName:"p"},"framerate_synced_with_monitor()")," and call your animation in your own loop:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"MyParticleSystem particles{};\nctx.update = [&]() {\n    for (int _ = 0; _ < 100; ++_) { // Do 100 particle updates in each ctx.update() to speed up the simulation\n        particles.update();\n    }\n};\n")),(0,i.kt)("h3",{id:"capped-at"},"Capped at"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"ctx.framerate_capped_at(5); // 5 fps\n")),(0,i.kt)("p",null,"Allows you to decide what the framerate should be. This can be useful for example if you want to slow down your animation to see each frame better."),(0,i.kt)("h2",{id:"time-perceived-as"},"Time perceived as"),(0,i.kt)("p",null,"Controls what is returned by ",(0,i.kt)("inlineCode",{parentName:"p"},"ctx.time()")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"ctx.delta_time()"),"."),(0,i.kt)("h3",{id:"realtime"},"Realtime"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"ctx.time_perceived_as_realtime();\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ctx.time()")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"ctx.delta_time()")," will correspond to the actual amount of time that elapses in the real world."),(0,i.kt)("p",null,"This is the default mode and ",(0,i.kt)("strong",{parentName:"p"},"it is ideal for realtime rendering"),"."),(0,i.kt)("h3",{id:"constant-delta-time"},"Constant delta time"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"ctx.time_perceived_as_constant_delta_time(30.f); // I want to export a 30 fps video\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ctx.time()")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"ctx.delta_time()")," will pretend that time elapses at exactly the framerate you asked."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"This is ideal for offline rendering")," because it won't be affected by the time it actually takes to run your ",(0,i.kt)("inlineCode",{parentName:"p"},"update()")," function."),(0,i.kt)("h2",{id:"pause-and-resume"},"Pause and resume"),(0,i.kt)("p",null,"Note that using ",(0,i.kt)("inlineCode",{parentName:"p"},"pause()")," will not only prevent ",(0,i.kt)("inlineCode",{parentName:"p"},"update()")," from beeing called, but also freeze the time (even if you use realtime mode). For example if ",(0,i.kt)("inlineCode",{parentName:"p"},"time()")," was 10.f when you called ",(0,i.kt)("inlineCode",{parentName:"p"},"pause()"),", and if you wait 5 seconds before calling ",(0,i.kt)("inlineCode",{parentName:"p"},"resume()"),", time will still be 10.f after that and ",(0,i.kt)("inlineCode",{parentName:"p"},"delta_time()")," will not be 5 seconds, it will be approximately 1/60 (if your framerate is set to 60 fps)."))}u.isMDXComponent=!0}}]);